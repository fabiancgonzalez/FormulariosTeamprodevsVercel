<div class="contenedor_formulario">
  <h2>Formulario de Persona</h2>
  
  <div *ngIf="error()" class="alert alert-error">
    {{ error() }}
  </div>
  
  <div *ngIf="mensajeGuardado()" class="alert alert-success">
    {{ mensajeGuardado() }}
  </div>

  <div class="personas-list" *ngIf="personas().length > 0">
    <h3>Personas Registradas</h3>
    <div class="persona-item" *ngFor="let persona of personas()">
      <span>{{ persona.nombre }} {{ persona.apellido }}</span>
      <button mat-raised-button color="primary" (click)="seleccionarPersona(persona)">Editar</button>
    </div>
  </div>

  <div class="form-section">
    <h3>{{ modoEdicion() ? 'Editar Persona' : 'Nueva Persona' }}</h3>

    <p>Nombre *</p>
    <mat-form-field>
      <mat-label>Ingrese su nombre:</mat-label>
      <input matInput [(ngModel)]="nombre" placeholder="nombre">
    </mat-form-field>

    <p>Apellido *</p>
    <mat-form-field>
      <mat-label>Ingrese su apellido:</mat-label>
      <input matInput [(ngModel)]="apellido" placeholder="apellido">
    </mat-form-field>

    <p>Email</p>
    <mat-form-field>
      <mat-label>Ingrese su email:</mat-label>
      <input matInput [(ngModel)]="email" type="email" placeholder="email@example.com">
    </mat-form-field>

    <p>Teléfono</p>
    <mat-form-field>
      <mat-label>Ingrese su teléfono:</mat-label>
      <input matInput [(ngModel)]="telefono" placeholder="123456789">
    </mat-form-field>

    <p>Fecha de nacimiento</p>
    <mat-form-field>
      <mat-label>Seleccione fecha:</mat-label>
      <input matInput [matDatepicker]="picker" [(ngModel)]="fechaNacimiento">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <p>Estatura</p>
    <mat-form-field>
      <mat-label>Ingrese su estatura (cm):</mat-label>
      <input matInput [(ngModel)]="estatura" type="number" placeholder="170">
    </mat-form-field>

    <div class="button-row">
      <button matButton [disabled]="cargando()" (click)="guardarPersona()" class="btn-guardar" *ngIf="!modoEdicion()">
        {{ cargando() ? 'Guardando...' : 'Guardar' }}
      </button>
      <button matButton [disabled]="cargando()" (click)="actualizarPersona()" class="btn-actualizar" *ngIf="modoEdicion()">
        {{ cargando() ? 'Actualizando...' : 'Actualizar' }}
      </button>
      <button matButton [disabled]="cargando()" (click)="eliminarPersona()" class="btn-eliminar" *ngIf="modoEdicion()">
        {{ cargando() ? 'Eliminando...' : 'Eliminar' }}
      </button>
      <button matButton (click)="limpiarFormulario()" class="btn-cancelar" *ngIf="modoEdicion()">
        Cancelar
      </button>
    </div>
  </div>
</div>
